angular.module("FourthBlightApp",["ui.router","ngAnimate"]),angular.module("FourthBlightApp",["ui.router","ngAnimate","toastr"]).controller("ApplicationCtrl",["$scope","$location","$window","toastr",function(t,e,l,r){}]),angular.module("FourthBlightApp").controller("FaqCtrl",["$scope",function(t){}]),angular.module("FourthBlightApp").controller("FurtherCtrl",["$scope",function(t){}]),angular.module("FourthBlightApp").controller("GeneratorCtrl",["$scope",function(t){}]),angular.module("FourthBlightApp").controller("HomeCtrl",["$scope","$location","$window",function(t,e,l){}]),angular.module("FourthBlightApp").controller("LocSearchCtrl",["$scope","SrdSvc",function(t,e){document.getElementById("location-text").focus(),document.getElementById("spell-btn").classList.remove("selected-search"),document.getElementById("monst-btn").classList.remove("selected-search"),document.getElementById("loc-btn").classList.add("selected-search"),t.locationResults={},t.searchLocations=function(l){l.length>=1&&e.getLocations(l).then(function(e){t.locationResults=e})}}]),angular.module("FourthBlightApp").controller("MapCtrl",["$scope",function(t){function e(t){g=t.fill?-1:1,l.apply(this,arguments)}function l(t){g&&(d3.select(this).classed("fill",t.fill=g>0),d.call(o))}function r(){l.apply(this,arguments),g=0}function o(t){t.attr("d",h(topojson.mesh(p,p.objects.hexagons,function(t,e){return t.fill^e.fill})))}function n(t,e,l){for(var r=2*t*Math.sin(Math.PI/3),o=1.5*t,n=Math.ceil((l+t)/o)+1,a=Math.ceil(e/r)+1,s=[],c=[],u=-1;u<=n;++u)for(var p=-1;p<=a;++p){var i=2*u,h=2*(p+(1&u)/2);c.push([[h,i-1],[1,1]],[[h+1,i],[0,1]],[[h+1,i+1],[-1,1]])}for(var u=0,m=3;u<n;++u,m+=6)for(var p=0;p<a;++p,m+=3)s.push({type:"Polygon",arcs:[[m,m+1,m+2,~(m+3*(a+2-(1&u))),~(m-2),~(m-3*(a+2+(1&u))+2)]],fill:Math.random()>p/a*2});return{transform:{translate:[0,0],scale:[1,1]},objects:{hexagons:{type:"GeometryCollection",geometries:s}},arcs:c}}function a(t){var e=2*t*Math.sin(Math.PI/3),l=1.5*t;return{stream:function(t){return{point:function(r,o){t.point(r*e/2,(o-(2-(1&o))/3)*l/2)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}}var s=document.getElementById("pageContent").offsetWidth-100,c=700,u=25,p=n(u,s,c),i=a(u),h=d3.geo.path().projection(i),m=d3.select("#hex-map").append("svg").attr("width",s).attr("height",c);m.append("g").attr("class","hexagon").selectAll("path").data(p.objects.hexagons.geometries).enter().append("path").attr("d",function(t){return h(topojson.feature(p,t))}).attr("class",function(t){return t.fill?"fill":null}).on("mousedown",e).on("mousemove",l).on("mouseup",r),m.append("path").datum(topojson.mesh(p,p.objects.hexagons)).attr("class","mesh").attr("d",h);var d=m.append("path").attr("class","border").call(o),g=0}]),angular.module("FourthBlightApp").controller("MonSearchCtrl",["$scope","SrdSvc",function(t,e){document.getElementById("monster-text").focus(),document.getElementById("spell-btn").classList.remove("selected-search"),document.getElementById("loc-btn").classList.remove("selected-search"),document.getElementById("monst-btn").classList.add("selected-search"),t.monsterResults={},t.searchMonsters=function(l){l.length>=1&&e.getMonsters(l).then(function(e){t.monsterResults=e})}}]),angular.module("FourthBlightApp").config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("home",{url:"/",templateUrl:"/templates/home.html",controller:"HomeCtrl"}).state("generators",{url:"/generators",templateUrl:"/templates/generator.html",controller:"GeneratorCtrl"}).state("faq",{url:"/faq",templateUrl:"/templates/faq.html",controller:"FaqCtrl"}).state("further",{url:"/further",templateUrl:"/templates/further.html",controller:"FurtherCtrl"}).state("srd",{url:"/srd",templateUrl:"/templates/srd.html",controller:"SrdCtrl"}).state("srd.spellSearch",{parent:"srd",templateUrl:"/templates/spellSearch.html",controller:"SpellSearchCtrl"}).state("srd.locSearch",{parent:"srd",templateUrl:"/templates/locSearch.html",controller:"LocSearchCtrl"}).state("srd.monSearch",{parent:"srd",templateUrl:"/templates/monSearch.html",controller:"MonSearchCtrl"}).state("map",{url:"/map",templateUrl:"/templates/map.html",controller:"MapCtrl"})}]),angular.module("FourthBlightApp").controller("SpellSearchCtrl",["$scope","SrdSvc",function(t,e){document.getElementById("spell-text").focus(),document.getElementById("loc-btn").classList.remove("selected-search"),document.getElementById("monst-btn").classList.remove("selected-search"),document.getElementById("spell-btn").classList.add("selected-search"),t.spellResults={},t.searchSpell=function(l){l.length>=3&&e.getSpells(l).then(function(e){t.spellResults=e})}}]),angular.module("FourthBlightApp").controller("SrdCtrl",["$scope","SrdSvc",function(t,e){}]),angular.module("FourthBlightApp").service("SrdSvc",["$http",function(t){var e=this;e.getSpells=function(e){return t.get("/api/spells/"+e).then(function(t){return t.data})},e.getLocations=function(e){return t.get("/api/locations/"+e).then(function(t){return t.data})},e.getMonsters=function(e){return t.get("/api/monsters/"+e).then(function(t){return t.data})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJmYXEuY3RybC5qcyIsImZ1cnRoZXIuY3RybC5qcyIsImdlbmVyYXRvci5jdHJsLmpzIiwiaG9tZS5jdHJsLmpzIiwibG9jc2VhcmNoLmN0cmwuanMiLCJtYXAuY3RybC5qcyIsIm1vbnNlYXJjaC5jdHJsLmpzIiwicm91dGVzLmpzIiwic3BlbGxzZWFyY2guY3RybC5qcyIsInNyZC5jdHJsLmpzIiwic3JkLnN2Yy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiR3aW5kb3ciLCJ0b2FzdHIiLCJTcmRTdmMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZm9jdXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJsb2NhdGlvblJlc3VsdHMiLCJzZWFyY2hMb2NhdGlvbnMiLCJzZWFyY2giLCJsZW5ndGgiLCJnZXRMb2NhdGlvbnMiLCJ0aGVuIiwibG9jYXRpb24iLCJtb3VzZWRvd24iLCJkIiwibW91c2luZyIsImZpbGwiLCJtb3VzZW1vdmUiLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJkMyIsInNlbGVjdCIsImNsYXNzZWQiLCJib3JkZXIiLCJjYWxsIiwicmVkcmF3IiwibW91c2V1cCIsImF0dHIiLCJwYXRoIiwidG9wb2pzb24iLCJtZXNoIiwidG9wb2xvZ3kiLCJvYmplY3RzIiwiaGV4YWdvbnMiLCJhIiwiYiIsImhleFRvcG9sb2d5IiwicmFkaXVzIiwid2lkdGgiLCJoZWlnaHQiLCJkeCIsIk1hdGgiLCJzaW4iLCJQSSIsImR5IiwibSIsImNlaWwiLCJuIiwiZ2VvbWV0cmllcyIsImFyY3MiLCJqIiwiaSIsInkiLCJ4IiwicHVzaCIsInEiLCJ0eXBlIiwicmFuZG9tIiwidHJhbnNmb3JtIiwidHJhbnNsYXRlIiwic2NhbGUiLCJoZXhQcm9qZWN0aW9uIiwic3RyZWFtIiwicG9pbnQiLCJsaW5lU3RhcnQiLCJsaW5lRW5kIiwicG9seWdvblN0YXJ0IiwicG9seWdvbkVuZCIsIm9mZnNldFdpZHRoIiwicHJvamVjdGlvbiIsImdlbyIsInN2ZyIsImFwcGVuZCIsInNlbGVjdEFsbCIsImRhdGEiLCJlbnRlciIsImZlYXR1cmUiLCJvbiIsImRhdHVtIiwibW9uc3RlclJlc3VsdHMiLCJzZWFyY2hNb25zdGVycyIsImdldE1vbnN0ZXJzIiwibW9uc3RlciIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsInBhcmVudCIsInNwZWxsUmVzdWx0cyIsInNlYXJjaFNwZWxsIiwiZ2V0U3BlbGxzIiwic3BlbGxzIiwic2VydmljZSIsIiRodHRwIiwic3ZjIiwibmFtZSIsImdldCIsInJlc3BvbnNlIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxtQkFDRSxZQUNBLGNDRkZELFFBQUFDLE9BQUEsbUJBQUEsWUFBQSxZQUFBLFdBQ0FDLFdBQUEsbUJBQStCLFNBQUEsWUFBQSxVQUFBLFNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsT0NEL0JOLFFBQUFDLE9BQUEsbUJBQ0FDLFdBQUEsV0FBdUIsU0FBQSxTQUFBQyxPQ0R2QkgsUUFBQUMsT0FBQSxtQkFDQUMsV0FBQSxlQUEyQixTQUFBLFNBQUFDLE9DRDNCSCxRQUFBQyxPQUFBLG1CQUNBQyxXQUFBLGlCQUE2QixTQUFBLFNBQUFDLE9DRDdCSCxRQUFBQyxPQUFBLG1CQUNBQyxXQUFBLFlBQXdCLFNBQUEsWUFBQSxVQUFBLFNBQUFDLEVBQUFDLEVBQUFDLE9DRHhCTCxRQUFBQyxPQUFBLG1CQUNBQyxXQUFBLGlCQUE2QixTQUFBLFNBQUEsU0FBQUMsRUFBQUksR0FDNUJDLFNBQUFDLGVBQUEsaUJBQUFDLFFBQ0FGLFNBQUFDLGVBQUEsYUFBQUUsVUFBQUMsT0FBQSxtQkFDQUosU0FBQUMsZUFBQSxhQUFBRSxVQUFBQyxPQUFBLG1CQUNB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LFNBQUF5RixHQUNFLE1BQUFGLEdBQUFHLElBQUEsa0JBQUFELEdBQ0F4RixLQUFBLFNBQUEwRixHQUNFLE1BQUFBLEdBQUExQixRQUlKdUIsRUFBQWhCLFlBQUEsU0FBQWlCLEdBQ0UsTUFBQUYsR0FBQUcsSUFBQSxpQkFBQUQsR0FDQXhGLEtBQUEsU0FBQTBGLEdBQ0UsTUFBQUEsR0FBQTFCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdGb3VydGhCbGlnaHRBcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnbmdBbmltYXRlJ1xuXSlcbiIsImFuZ3VsYXIubW9kdWxlKCdGb3VydGhCbGlnaHRBcHAnLCBbJ3VpLnJvdXRlcicsJ25nQW5pbWF0ZScsJ3RvYXN0ciddKVxuLmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHdpbmRvdywgdG9hc3RyKSB7XG4gIFxuXG5cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnRm91cnRoQmxpZ2h0QXBwJylcbi5jb250cm9sbGVyKCdGYXFDdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICBcbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnRm91cnRoQmxpZ2h0QXBwJylcbi5jb250cm9sbGVyKCdGdXJ0aGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uY29udHJvbGxlcignR2VuZXJhdG9yQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uY29udHJvbGxlcignSG9tZUN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICR3aW5kb3cpIHtcblxuXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uY29udHJvbGxlcignTG9jU2VhcmNoQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFNyZFN2Yykge1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uLXRleHRcIikuZm9jdXMoKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGVsbC1idG5cIikuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQtc2VhcmNoJyk7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9uc3QtYnRuXCIpLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkLXNlYXJjaCcpO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvYy1idG5cIikuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQtc2VhcmNoJyk7XG5cblx0JHNjb3BlLmxvY2F0aW9uUmVzdWx0cyA9IHt9O1xuXG5cdCRzY29wZS5zZWFyY2hMb2NhdGlvbnMgPSBmdW5jdGlvbihzZWFyY2gpe1xuXHRcdGlmKHNlYXJjaC5sZW5ndGggPj0gMSl7XG5cdFx0ICBcdFNyZFN2Yy5nZXRMb2NhdGlvbnMoc2VhcmNoKS50aGVuKGZ1bmN0aW9uKGxvY2F0aW9uKXtcblx0XHQgIFx0XHQkc2NvcGUubG9jYXRpb25SZXN1bHRzID0gbG9jYXRpb247XG5cdFx0ICBcdH0pXG5cdFx0fVxuXHR9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uY29udHJvbGxlcignTWFwQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgXG4gIFx0dmFyIHdpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYWdlQ29udGVudFwiKS5vZmZzZXRXaWR0aCAtIDEwMCxcbiAgICBoZWlnaHQgPSA3MDAsXG4gICAgcmFkaXVzID0gMjU7XG5cblx0dmFyIHRvcG9sb2d5ID0gaGV4VG9wb2xvZ3kocmFkaXVzLCB3aWR0aCwgaGVpZ2h0KTtcblxuXHR2YXIgcHJvamVjdGlvbiA9IGhleFByb2plY3Rpb24ocmFkaXVzKTtcblxuXHR2YXIgcGF0aCA9IGQzLmdlby5wYXRoKClcblx0ICAgIC5wcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuXG5cdHZhciBzdmcgPSBkMy5zZWxlY3QoXCIjaGV4LW1hcFwiKS5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdCAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXG5cdHN2Zy5hcHBlbmQoXCJnXCIpXG5cdCAgICAuYXR0cihcImNsYXNzXCIsIFwiaGV4YWdvblwiKVxuXHQgIC5zZWxlY3RBbGwoXCJwYXRoXCIpXG5cdCAgICAuZGF0YSh0b3BvbG9neS5vYmplY3RzLmhleGFnb25zLmdlb21ldHJpZXMpXG5cdCAgLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKVxuXHQgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHBhdGgodG9wb2pzb24uZmVhdHVyZSh0b3BvbG9neSwgZCkpOyB9KVxuXHQgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmZpbGwgPyBcImZpbGxcIiA6IG51bGw7IH0pXG5cdCAgICAub24oXCJtb3VzZWRvd25cIiwgbW91c2Vkb3duKVxuXHQgICAgLm9uKFwibW91c2Vtb3ZlXCIsIG1vdXNlbW92ZSlcblx0ICAgIC5vbihcIm1vdXNldXBcIiwgbW91c2V1cCk7XG5cblx0c3ZnLmFwcGVuZChcInBhdGhcIilcblx0ICAgIC5kYXR1bSh0b3BvanNvbi5tZXNoKHRvcG9sb2d5LCB0b3BvbG9neS5vYmplY3RzLmhleGFnb25zKSlcblx0ICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJtZXNoXCIpXG5cdCAgICAuYXR0cihcImRcIiwgcGF0aCk7XG5cblx0dmFyIGJvcmRlciA9IHN2Zy5hcHBlbmQoXCJwYXRoXCIpXG5cdCAgICAuYXR0cihcImNsYXNzXCIsIFwiYm9yZGVyXCIpXG5cdCAgICAuY2FsbChyZWRyYXcpO1xuXG5cdHZhciBtb3VzaW5nID0gMDtcblxuXHRmdW5jdGlvbiBtb3VzZWRvd24oZCkge1xuXHQgIG1vdXNpbmcgPSBkLmZpbGwgPyAtMSA6ICsxO1xuXHQgIG1vdXNlbW92ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gbW91c2Vtb3ZlKGQpIHtcblx0ICBpZiAobW91c2luZykge1xuXHQgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJmaWxsXCIsIGQuZmlsbCA9IG1vdXNpbmcgPiAwKTtcblx0ICAgIGJvcmRlci5jYWxsKHJlZHJhdyk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gbW91c2V1cCgpIHtcblx0ICBtb3VzZW1vdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICBtb3VzaW5nID0gMDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlZHJhdyhib3JkZXIpIHtcblx0ICBib3JkZXIuYXR0cihcImRcIiwgcGF0aCh0b3BvanNvbi5tZXNoKHRvcG9sb2d5LCB0b3BvbG9neS5vYmplY3RzLmhleGFnb25zLCBmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLmZpbGwgXiBiLmZpbGw7IH0pKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBoZXhUb3BvbG9neShyYWRpdXMsIHdpZHRoLCBoZWlnaHQpIHtcblx0ICB2YXIgZHggPSByYWRpdXMgKiAyICogTWF0aC5zaW4oTWF0aC5QSSAvIDMpLFxuXHQgICAgICBkeSA9IHJhZGl1cyAqIDEuNSxcblx0ICAgICAgbSA9IE1hdGguY2VpbCgoaGVpZ2h0ICsgcmFkaXVzKSAvIGR5KSArIDEsXG5cdCAgICAgIG4gPSBNYXRoLmNlaWwod2lkdGggLyBkeCkgKyAxLFxuXHQgICAgICBnZW9tZXRyaWVzID0gW10sXG5cdCAgICAgIGFyY3MgPSBbXTtcblxuXHQgIGZvciAodmFyIGogPSAtMTsgaiA8PSBtOyArK2opIHtcblx0ICAgIGZvciAodmFyIGkgPSAtMTsgaSA8PSBuOyArK2kpIHtcblx0ICAgICAgdmFyIHkgPSBqICogMiwgeCA9IChpICsgKGogJiAxKSAvIDIpICogMjtcblx0ICAgICAgYXJjcy5wdXNoKFtbeCwgeSAtIDFdLCBbMSwgMV1dLCBbW3ggKyAxLCB5XSwgWzAsIDFdXSwgW1t4ICsgMSwgeSArIDFdLCBbLTEsIDFdXSk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgZm9yICh2YXIgaiA9IDAsIHEgPSAzOyBqIDwgbTsgKytqLCBxICs9IDYpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpLCBxICs9IDMpIHtcblx0ICAgICAgZ2VvbWV0cmllcy5wdXNoKHtcblx0ICAgICAgICB0eXBlOiBcIlBvbHlnb25cIixcblx0ICAgICAgICBhcmNzOiBbW3EsIHEgKyAxLCBxICsgMiwgfihxICsgKG4gKyAyIC0gKGogJiAxKSkgKiAzKSwgfihxIC0gMiksIH4ocSAtIChuICsgMiArIChqICYgMSkpICogMyArIDIpXV0sXG5cdCAgICAgICAgZmlsbDogTWF0aC5yYW5kb20oKSA+IGkgLyBuICogMlxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cblx0ICByZXR1cm4ge1xuXHQgICAgdHJhbnNmb3JtOiB7dHJhbnNsYXRlOiBbMCwgMF0sIHNjYWxlOiBbMSwgMV19LFxuXHQgICAgb2JqZWN0czoge2hleGFnb25zOiB7dHlwZTogXCJHZW9tZXRyeUNvbGxlY3Rpb25cIiwgZ2VvbWV0cmllczogZ2VvbWV0cmllc319LFxuXHQgICAgYXJjczogYXJjc1xuXHQgIH07XG5cdH1cblxuXHRmdW5jdGlvbiBoZXhQcm9qZWN0aW9uKHJhZGl1cykge1xuXHQgIHZhciBkeCA9IHJhZGl1cyAqIDIgKiBNYXRoLnNpbihNYXRoLlBJIC8gMyksXG5cdCAgICAgIGR5ID0gcmFkaXVzICogMS41O1xuXHQgIHJldHVybiB7XG5cdCAgICBzdHJlYW06IGZ1bmN0aW9uKHN0cmVhbSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHBvaW50OiBmdW5jdGlvbih4LCB5KSB7IHN0cmVhbS5wb2ludCh4ICogZHggLyAyLCAoeSAtICgyIC0gKHkgJiAxKSkgLyAzKSAqIGR5IC8gMik7IH0sXG5cdCAgICAgICAgbGluZVN0YXJ0OiBmdW5jdGlvbigpIHsgc3RyZWFtLmxpbmVTdGFydCgpOyB9LFxuXHQgICAgICAgIGxpbmVFbmQ6IGZ1bmN0aW9uKCkgeyBzdHJlYW0ubGluZUVuZCgpOyB9LFxuXHQgICAgICAgIHBvbHlnb25TdGFydDogZnVuY3Rpb24oKSB7IHN0cmVhbS5wb2x5Z29uU3RhcnQoKTsgfSxcblx0ICAgICAgICBwb2x5Z29uRW5kOiBmdW5jdGlvbigpIHsgc3RyZWFtLnBvbHlnb25FbmQoKTsgfVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdGb3VydGhCbGlnaHRBcHAnKVxuLmNvbnRyb2xsZXIoJ01vblNlYXJjaEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBTcmRTdmMpIHtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb25zdGVyLXRleHRcIikuZm9jdXMoKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGVsbC1idG5cIikuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQtc2VhcmNoJyk7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jLWJ0blwiKS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZC1zZWFyY2gnKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb25zdC1idG5cIikuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQtc2VhcmNoJyk7XG5cblx0JHNjb3BlLm1vbnN0ZXJSZXN1bHRzID0ge307XG5cblx0JHNjb3BlLnNlYXJjaE1vbnN0ZXJzID0gZnVuY3Rpb24oc2VhcmNoKXtcblx0XHRpZihzZWFyY2gubGVuZ3RoID49IDEpe1xuXHRcdCAgXHRTcmRTdmMuZ2V0TW9uc3RlcnMoc2VhcmNoKS50aGVuKGZ1bmN0aW9uKG1vbnN0ZXIpe1xuXHRcdCAgXHRcdCRzY29wZS5tb25zdGVyUmVzdWx0cyA9IG1vbnN0ZXI7XG5cdFx0ICBcdH0pXG5cdFx0fVxuXHR9XG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG5cdC8vXG5cdC8vIE5vdyBzZXQgdXAgdGhlIHN0YXRlc1xuXHQkc3RhdGVQcm92aWRlclxuXHRcdC5zdGF0ZSgnaG9tZScsIHtcblx0XHQgIHVybDogXCIvXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL2hvbWUuaHRtbFwiLFxuXHRcdCAgY29udHJvbGxlcjogXCJIb21lQ3RybFwiXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2dlbmVyYXRvcnMnLCB7XG5cdFx0ICB1cmw6IFwiL2dlbmVyYXRvcnNcIixcblx0XHQgIHRlbXBsYXRlVXJsOiBcIi90ZW1wbGF0ZXMvZ2VuZXJhdG9yLmh0bWxcIixcblx0XHQgIGNvbnRyb2xsZXI6IFwiR2VuZXJhdG9yQ3RybFwiXG5cdFx0fSlcblx0XHQuc3RhdGUoJ2ZhcScsIHtcblx0XHQgIHVybDogXCIvZmFxXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL2ZhcS5odG1sXCIsXG5cdFx0ICBjb250cm9sbGVyOiBcIkZhcUN0cmxcIlxuXHRcdH0pXG5cdFx0LnN0YXRlKCdmdXJ0aGVyJywge1xuXHRcdCAgdXJsOiBcIi9mdXJ0aGVyXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL2Z1cnRoZXIuaHRtbFwiLFxuXHRcdCAgY29udHJvbGxlcjogXCJGdXJ0aGVyQ3RybFwiXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3NyZCcsIHtcblx0XHQgIHVybDogXCIvc3JkXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL3NyZC5odG1sXCIsXG5cdFx0ICBjb250cm9sbGVyOiBcIlNyZEN0cmxcIlxuXHRcdH0pXG5cdFx0LnN0YXRlKCdzcmQuc3BlbGxTZWFyY2gnLCB7XG5cdFx0ICBwYXJlbnQ6IFwic3JkXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL3NwZWxsU2VhcmNoLmh0bWxcIixcblx0XHQgIGNvbnRyb2xsZXI6IFwiU3BlbGxTZWFyY2hDdHJsXCJcblx0XHR9KVxuXHRcdC5zdGF0ZSgnc3JkLmxvY1NlYXJjaCcsIHtcblx0XHQgIHBhcmVudDogXCJzcmRcIixcblx0XHQgIHRlbXBsYXRlVXJsOiBcIi90ZW1wbGF0ZXMvbG9jU2VhcmNoLmh0bWxcIixcblx0XHQgIGNvbnRyb2xsZXI6IFwiTG9jU2VhcmNoQ3RybFwiXG5cdFx0fSlcblx0XHQuc3RhdGUoJ3NyZC5tb25TZWFyY2gnLCB7XG5cdFx0ICBwYXJlbnQ6IFwic3JkXCIsXG5cdFx0ICB0ZW1wbGF0ZVVybDogXCIvdGVtcGxhdGVzL21vblNlYXJjaC5odG1sXCIsXG5cdFx0ICBjb250cm9sbGVyOiBcIk1vblNlYXJjaEN0cmxcIlxuXHRcdH0pXG5cdFx0LnN0YXRlKCdtYXAnLCB7XG5cdFx0ICB1cmw6IFwiL21hcFwiLFxuXHRcdCAgdGVtcGxhdGVVcmw6IFwiL3RlbXBsYXRlcy9tYXAuaHRtbFwiLFxuXHRcdCAgY29udHJvbGxlcjogXCJNYXBDdHJsXCJcblx0XHR9KVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdGb3VydGhCbGlnaHRBcHAnKVxuLmNvbnRyb2xsZXIoJ1NwZWxsU2VhcmNoQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFNyZFN2Yykge1xuXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3BlbGwtdGV4dFwiKS5mb2N1cygpO1xuXG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jLWJ0blwiKS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZC1zZWFyY2gnKTtcblx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb25zdC1idG5cIikuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQtc2VhcmNoJyk7XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3BlbGwtYnRuXCIpLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkLXNlYXJjaCcpO1xuICBcblx0JHNjb3BlLnNwZWxsUmVzdWx0cyA9IHt9O1xuXG5cdCRzY29wZS5zZWFyY2hTcGVsbCA9IGZ1bmN0aW9uKHNlYXJjaCl7XG5cdFx0aWYoc2VhcmNoLmxlbmd0aCA+PSAzKXtcblx0XHQgIFx0U3JkU3ZjLmdldFNwZWxscyhzZWFyY2gpLnRoZW4oZnVuY3Rpb24oc3BlbGxzKXtcblx0XHQgIFx0XHQkc2NvcGUuc3BlbGxSZXN1bHRzID0gc3BlbGxzO1xuXHRcdCAgXHR9KVxuXHRcdH1cblx0fVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdGb3VydGhCbGlnaHRBcHAnKVxuLmNvbnRyb2xsZXIoJ1NyZEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBTcmRTdmMpIHtcbiAgXG59KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0ZvdXJ0aEJsaWdodEFwcCcpXG4uc2VydmljZSgnU3JkU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gIHZhciBzdmMgPSB0aGlzXG4gIHN2Yy5nZXRTcGVsbHMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3BlbGxzLycgKyBuYW1lKVxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGFcbiAgICB9KVxuICB9XG5cbiAgc3ZjLmdldExvY2F0aW9ucyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9sb2NhdGlvbnMvJyArIG5hbWUpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgIH0pXG4gIH1cblxuICBzdmMuZ2V0TW9uc3RlcnMgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbW9uc3RlcnMvJyArIG5hbWUpXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgIH0pXG4gIH1cbn0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
